# 20200521

根目录下的test.py文件是否可以删除?

目前还是无法正常调试, 希望周四解决一下这个问题



# 20200516

需要问师兄词向量怎么处理.

问老师学术报告的撰写思路.

任务:





# 20200514

师姐的项目中概念的先修关系是自动化处理的, 我们能不能用?

整体思路和需求分析中的内容是不是重复了

hwc:

正式文件开始合作编写, 关于具体方案我的想法如下: 先关注内容, 等到内容定下(25号?), 开始填充到doc中进行排版, 大约一天即可, 然后交给老师签字? 

内容的写作可以继续使用git. 我已经建好3个文件. 不过进一步分工需要讨论.



# 20200512

待完成：
1.扩展第一张图，利用相似度 BFS 生成概念先修【樊】【胡（多中心图的画法】
- 突然想到原图和多中心的图如果可以分别展示就好，就是点击按钮切换视图
2.图的动态效果，拖动，展开（选做）
3.点击图的节点，跳转到该节点的搜索结果页面（需要调整welcome的GET端点）【黄看端点问题】
4.树图加边框、标题；第一张图调整边框大小和标题位置【胡】
5.资源合集标签页：MOOC改成表格展示，courses放入自己爬取的课程（没url的先算了）, book和paper先空着。(突然想到)在课程一栏可以添加课程的核心概念
6.页面整体美化【胡】

服务器部署可能有点麻烦。

可以开始写文档了，5.30前需要提交给院系。


# 20200509

完成了：把所有抓取的信息导入到同一张表格，该表导入es;将children信息传递至html
作先修关系图从uni_course中选课程（目前是最多用到name和descript字段），画图（目前是把查出来的第一门课传到html中）
小胡可以用{{prereqs}}变量的["_source"]["children"]信息绘图了。

使用方法：
1. 新建数据库all_course,将sql文件"20200509all_course.courses.sql"导入。
2. 运行/BuildIndex/app.py将mysql中的sql导入es,注意init_neo4j()关闭，init_es()中只有create_course()不被注释

# 20200421

本周：完成课程先修关系的展示
樊：word embedding 胡：美化页面，参考bootstrap card 黄：es查询优化
课程暂定不放入es，查询时输出相关课程只在课程标题上做文章。

# 20200419

关于相似度计算：
给词->调用接口得到词的向量->求和/平均值/cat得到短语的向量->用余弦或其他方法计算相似度
[一个预训练好的多语言词向量资源](https://fasttext.cc/docs/en/english-vectors.html)
中文的可以用腾讯AI Lab发布的

集中在人工智能领域。

部署到服务器：把项目打包上传

# 20200418

hwc:
http://www.openkg.cn/dataset/cndbpedia
dbpedia在我们项目中的应用是什么? 
appdoc中的运行部分需要重点梳理.

我们的项目无法直接使用教程中的pythonanywhere来部署. 因为我们除了使用flask框架, 还使用了mysql, es, neo4j等后端服务, 这些服务在这个平台上无法/很难部署. 


# 20200414

本周樊雨萱和胡文博画出先修课程图，黄文诚看相关度计算/服务器

# 20200412

#### 项目
以概念为最底层的线索，课程跟概念连接起来. 概念的筛选.	计算简介中的概念和标题的相关程度. **计算某个概念和课程标题的相关度**
概念有关的课程, 课程的先修课程, 先修课程有关的概念. 哪些课包含了这个概念
->(1)展示页面(2)查相关度怎么算，根据相关度筛选相关概念

老师之后会在校内搭服务器，可以在服务器上部署.



#### 如果想写文章, 专利/软件著作权. 时间怎么安排? 
两到三个月. 能拿得出手的至少要CCF C或B或者国内论文. 想快的话就是发会议。
查资料，相关的工作需要避免重复. 系统功能完善. 
如果是想做研究的话，读论文，找一些相关的问题和idea，之后可以讨论. 
至少咱们这个项目可以做“把一个课程的简介、慕课视频字幕、ppt全拿出来”->自动“识别概念-发现概念的关系-形成逻辑的图”这样的工作


# 20200411

目前mit:16, uw:248, caltech:135, stanford:~90对关系，应该是够用了
(0)这些关系如何使用?四个学校的课程如何整合(对齐)？还是不整合了、直接另外加一个图展示课程的先修关系，在那上面可以跳转到其他课程？
    另外，这些关系中一半应该是基础编程和数学课，有重复
(1)dbpedia产生的部分CS无关的词怎么过滤掉
(2)探索到mit ocw网站的map如何使用上

# 20200407

进行了网络资源调研，继续爬取[加州理工](http://www.cms.caltech.edu/academics/course_desc)和[华盛顿大学](https://www.cs.washington.edu/education/courses/)的数据直到先修关系够用。

# 20200405和老师讨论

暂时爬取了mit的课程，但先修关系很少，去掉编号不在集合中的只有16个。
老师的建议是继续爬取[斯坦福AI lab](https://ai.stanford.edu/courses/)的课程，并利用[MOOC搜索引擎](https://www.classcentral.com)

# 20200330

dbpedia-spotlight能用了，继续爬取课程



# 20200325 实现echarts画图

第一组数据的起始节点是查询节点时画图有错，待debug



# 20200323

fyx实现neo4j的查询功能

neo4j 4.0版本需要java11，所以推荐下载[neo4j community edition 3.5.16版本](https://neo4j.com/download-center/#community)

#### 启动neo4j服务器：

在git bash中进入bin目录，执行`./neo4j.bat console`打开neo4j的控制台，可在http://localhost:7474/查看。 console命令之外，还有start:启动服务，stop：关闭，status：查看运行状态，install-service：安装neo4j在windows上的服务

- 区别：service只要不stop，会随系统启动而自动启动，无需操作。而console需要运行命令才能启动，关闭则stop

#### 导入师兄的数据：

首先neo4j stop关闭服务
接着neo4j-admin.bat load --from=E:/KGProject/2016-10-02.dump --database=graph.db --force导入
重新开启服务即可使用



# 20200326

昨天问老师推荐路径的实现思路：根据概念搜索课程，展示课程的学习顺序，然后展示每门课的主要概念。主要概念用DBpedia spotlight从课程介绍中提取。

爬取了mit的课程数据，待清洗。

再次确定分工：（继续赶进度，冲鸭）
胡文博：修改echarts的bug，修改页面css给各模块加框
黄文诚：清洗mit的课程数据，存成先修关系的格式
樊雨萱：学习DBpedia spotlight的使用，完善es和neo4j的查询精度

# 20200324 

实现了neo4j的查询功能，以及echarts画图

第一组数据的起始节点是查询节点时画图有错，待debug

# 20200322 和老师讨论

neo4j先展示出来，web一套查询返回都弄顺了，再考虑算法。

课程体系先弄国外的，用正则匹配。国内的再考虑。(先抓取[MIT](https://www.eecs.mit.edu/academics-admissions/academic-information/subject-updates-spring-2020/68836s076)的课程存入数据库)

先用数据库中已经存在的数据，再考虑很常用但是数据库中没有的。

本周大家进展都比较慢

老师给的neo4j数据部分，参考师姐的论文：

1. IsA关系：用Wibi_IsA + Wordnet_Hypernyms + WikiData_SubclassOf + WikiData_InstanceOf
2. Prerequisite关系：来自Wikipedia links和MOOCs。通过计算特征、训练逻辑回归模型、计算得到任意两个概念之间是否有先修关系。模型是基于别人的wikipedia concept map dataset预训练的。
3. RelatedTo关系：利用skip-gram和node2vec模型分别学习word embedding和network embedding，平均数作为最终embedding. embedding的相似度大于0.3并且有直接link则作为RelatedTo关系

从师兄给的代码可以看出，prerequisite是neo4j中的KGBnu_Ref, RelatedTo是KGBnu_RelatedTo




# 20200317

重新确定分工：
胡文博：美化页面
黄文诚：尝试爬虫伯克利课程体系
樊雨萱：neo4j数据库

# 20200315 和老师讨论

稍后给关系的neo4j数据，可以解决关系图的部分。学习路径规划暂时不知道怎么解决。 
页面需要美化，可以参考emnlp论文。

# 20200314 

实现查询相关慕课的功能

# 20200310

实现查询知识点的功能，页面待美化

# 20200308

该周进展比较缓慢

# 20200301 和老师讨论

关系是存在图数据库里的，如果使用图数据库，可以选择分别维护两个数据库，也可以把图数据库导出写成关系数据库，这样就只需要维护一个数据库

或许可以做两个按钮，一个低级搜索，一个高级搜索来，推进度。

elastic search返回id,用id去MySQL寻找字段

# 20200228

分两步进行. 

1. 将Mysql中的数据使用Python接口读入, 再使用ES的python接口构建ES数据集.
2. 使用flask框架实现用户与数据集的交互(查询)

# 20200226 

明确任务：目前首先是对concept建表，实现用户搜索一个概念，返回概念的解释(+相关慕课)这个功能

# 20200224

拿到部分数据，下载MySQL, 导入后查看数据，能用的应该只有concept和mooc表

确定开学后的讨论时间：周二周四晚上和周日与老师讨论

# 20200223 和老师讨论

老师的数据库采用mysql, 先以学校的数据库为基础, 尽快实现一部分功能, 再做改进(时间问题)

老师现有的数据比之前多了bilibili的。下午给数据的账号

单建数据库，参考现有的数据（如某些表里的数据直接copy)，但是在家计算资源不太强可能没法建大表，只能先把表头建好放100条数据测试功能

关于elastic search: 基于Java，可在<1周时间内学会，通过API提交，实现建索引、查询、排序等

# 20200222

实现了目前已有功能的测试和代码结构调整

# 20200220

确定工作分工

目前需要做：
加标签页(tab)、学习代码结构调整和部署上线部分的内容并完成
学习记录分享：以后每两天讨论一次，并上传这两天的学习文档

下一步工作如何需要咨询老师：明天上午跟老师讨论

# 20200219

前端样式需要调整.
暂时不加入邮箱信息.(验证比较复杂,需要后期设计)
request.form.get()方法从post请求中获取表格数据,但是需要传入的参数为input标签的name属性值

> name 属性规定 input 元素的名称。
>
> name 属性用于对提交到服务器后的表单数据进行标识，或者在客户端通过 JavaScript 引用表单数据。只有设置了 name 属性的表单元素才能在提交表单时传递它们的值。

注册时会验证数据库中是否已经有用户名,因此用户名是唯一的.(但对于应用中声明的数据库模型类来说没有设置为主键)

SQLAlchemy的查询操作文档无法访问,如果要使用该数据库封装方案,则必须了解文档.

链接跳转时需要使用url_for函数以及jinja变量嵌入

#### 主要工作:

使用url_for修改链接目标. 组织模板继承和优化.
完成用户数据库与用户注册登录模块.
设计路由与模板的用户认证保护.

#### 未完成的:

应用结构文档和使用文档(感觉暂时不需要,因为只是个样品)
模块化测试.(20200223基本完成)
代码结构组织(代码都堆到app.py里边肯定不是长久之计)
部署上线

# 20200211

确定一下学习的分工：
- html+css+bootstrap 樊雨萱 胡文博
- javascript 黄文诚 胡文博
- python+flask 樊雨萱 黄文诚
- neo4j 数据库（问老师）
- elastic search怎么用（问老师）

尽快问老师数据接口的事情


# 20200117 寒假开工
寒假整体规划：
- 每3天集中讨论一次（暂定晚8点），期间在微信随时交流。

0117-0120安排：
- fyx整理模板，hwc hwb继续学习flask
- 学习使用Git,参见[廖雪峰的教程](https://www.liaoxuefeng.com/wiki/896043488029600 "liaoxuefeng")

最终的页面设计图：
[view](./view.jpg "view")



# 20191115 找老师
1.用bootstrap提供的模板，一周内完成前端的设计
2.页面设计图可以，资源展示框不用悬浮框，而用tab
3.用elasticsearch堆各种数据进行索引，索引到id然后去数据库里取。



# 20191025 week2 讨论记录
## 需求文档

大致结构：
1. 一个搜索框处理所有输入（而非查小知识点在页面A，查学习路径规划在页面B）
2. 对于小知识点，返回：
    - 知识点的解释
    - 一个多层的图，分层展示和此知识点相关的上层概念、下层概念、所属课程、所属书籍、相关信息等。
        - 点击图中任何一个结点，则该结点变成中心结点，知识点解释中的文字也对应新中心结点的解释。
    - 悬浮框：当鼠标悬停/点击左图中某一结点时，分类展示知识点的相关资源：慕课、书籍、大学课程、论文列表
        - 每一类资源只展示TOP1-2的项目，防止用户由于选择过多而不知道该看哪一项。
        - 有readmore选项，可以展开或者跳转去看更多相关资源
        - 悬停在每一个资源项目上，会展示相关项目的特点（如吴恩达的《机器学习》课程适合初学者，数学公式推导少）
        - 点击每一个资源项目，都可以跳转到相应的课程、相应的书籍电子书、论文的地址
3. 对于大概念，返回：
    - 概念的解释
        - 这里增添对大概念整体的描述及学习指导（e.g.数据结构这门课程解决了什么问题，问什么要学这门课）
    - 概念的前置课程、后续课程图
    - 概念的内部结构图，按照纵向的学习时间线展示，每一个结点都链接有相关资源，用于快速跳转
    - 悬浮框：作用同上
4. 后台记录用户查询各个知识点的次数等搜索信息，有搜索记录、收藏知识点、收藏资源列表等选项。

最终的页面设计图：
[view](./view.jpg "view")

## 一些问题
1. 知识图谱中文本的格式，纯文本？markdown？html?（公式怎么展现）
2. 怎么在后台分辨大概念与小概念。

## 功能分析：

一个搜索框处理所有输入。

学习路线规划怎样展示？

以查询词汇“机器学习”为例：
**首先简明扼要地展示为了学习机器学习，需要学那些前置知识，而学了机器学习，又可以进一步学习哪些后置知识。** 
**然后通过纵向的时间线展示，每一个节点是一个部分**（例如，机器学习中的提升算法）**。每一个部分都分类列出资源。节点之间的组织需要整理。**
对于每一类资源，我们通过某些排序算法选出rank为1的推荐给用户，防止选花眼了（不过展开可看见其他的）  

【待讨论】资源按类别怎么展示。不能单纯梳树状结构。

需求有两种，详细的和概论性的，用户可选

**详细的指导包括对学科进行模块的分割，标记处哪一模块讲了什么问题，对每一模块提供资源。**
资源怎么获取？对于基础的，成熟的课程（数据结构），有现成的网课，论文，课程结构等资源。对于前沿的课程（没有成熟的学科体系），需要通过知识图谱来构建课程结构，据此查找资源，然后进行展示。


**概论性的指导包括对学科整体的描述，学习的整体指导**（如数据结构这门学科解决了什么问题），**学科结构的展示，不需要展示资源。**  
【待讨论】这个的实现方法、是否可行

知识点搜索结果怎么展示：

概念文本+节点网络

节点网络应该展示子概念与父概念以及平级概念。当点击网络中的其他节点时，概念文本随之改变。

# 20191022 找老师

## 科研路上的小小进展
- 如何进行下一步的研究？
    - 我们需要做什么
    - 怎么做
    - 找什么资料

## 关于老师的知识图谱
-  图谱中有什么
    - 中英文的概念
    - 概念的解释
    - 概念的父概念子概念
    - 概念的部分先修关系（不是100%准确，概率关系，如80%有这个先修关系）
    - 学院有服务器，校内调试可以用，校内外不通
- 图谱用neo4j的图数据库存储


## 我们要做什么事情
- 不做APP了，做一个适配手机的网页就行。
- 功能：
    - **查询一个概念，展示概念定义，相关概念，在哪些大学课程、慕课课程中出现，在哪些前沿论文中出现，将这些信息综合起来提给用户**。
    - 注：不能在一个页面上展示，组织形式要新颖一些，不能把一堆课全扔给他，规划学习路线（修读顺序、课程先修关系）
    - 实现方式：  
    如学无人驾驶：去知识图谱中找到无人驾驶的概念——无人驾驶是关于xx，xx的学科 =>  
    从一个个概念延伸去找包含这些概念包含在哪些书籍、课程、论文中 =>  
    用户点中一个课程，就展现课程结构、有哪些知识点，学这门课要先学什么再学什么
- **要做一个类似知识引擎的东西，所有的资源都建立跟概念图谱的链接，从概念图谱的概念出发，再找与之相关的课程、书籍、资料，综合地展现给用户**。
- **This week : 写需求文档，列to do list和需求分析、界面设计，然后找老师确定技术路线**。


## 我们可以利用的资源
- 维基百科的知识库
- 慕课/网课
- 图书目录（京东）
- 各大会议论文的paper list【未做】
- 国内（清北）国外大学的课程体系【待做】
    - 课程的描述
        - 用老师的工具,识别一段描述里面的概念,链接到知识图谱上  
    - 课程和课程的先修关系
    - 概念和概念的先修关系
        - 可结合老师抓取的京东书籍目录
- =>**梳理资源、信息的展现形式**。